# Большой лазерный гравер своими руками 
[[01-CNC-Laser]]

![[Pasted image 20260202222437.png]]

Привет! В этой статье речь пойдет о лазерном ЧПУ-станке, который наша студенческая команда делала на 2ом курсе в рамках университетской проектной практики. Основная цель материала - поделиться личным опытом и дать обзорное представление о том, как такие устройства можно собирать. Будет много картинок, ссылок на смежные темы и субъективного мнения. Поехали)
## Теорминимум

Материал относительно простой, но небольшой уровень начальных знаний все же требуется. Если вдруг вы по какой-то причине не знакомы с некоторыми понятиями из списка ниже, то можно их прогуглить или скормить нейросети для пояснений, этого хватит:

_Шаговый двигатель, драйвер шагового двигателя, концевой выключатель, диодный лазер, CO2-лазер, g-code, прошивка микроконтроллера, виды прошивок (GRBL, Marlin и т.п.)_
## Пара вводных слов и список комплектующих

Станок делался в первую очередь для резки / гравировки фанеры и планировался достаточно большим, поэтому можно было думать об использовании как диодного лазера, так и CO2. Мы остановились на первом варианте и взяли диодную головку на 10 оптических ватт с длиной волны 455 нм. С хорошей CO2-трубкой спектр возможностей больше конечно, но конструкция дороже и сложнее (требуется подвижная оптика для подачи луча от трубки в точку реза, водяное охлаждение, доп меры защиты из-за инфракрасного излучения).

Готовых примеров ЧПУшек с диодниками очень много, и в большинстве своем они похожи - сразу представляется что-то в таком духе:

![[Pasted image 20260202222507.png]]
TTS55 pro

Рабочая область таких станков обычно не выходит за рамки 500 на 500 мм, но в нашем случае размеры планировались значительно больше среднестатистических: ребята из внутривузовского инженерного кружка (под нужды которого и собирался станок) хотели иметь в распоряжении область не менее 763 на 763 мм, т.к. фанеру для заготовок удобно покупать листами 1525 на 1525, а дальше уже резать их на 4 части и обрабатывать лазером.

В этой весовой категории тоже есть готовые модели, но их мало и стоят они в основном дорого. Вот пара примеров для ознакомления (все, что было найдено на озоне):

|   |   |   |
|---|---|---|
|Модель|Рабочая область|Цена (23.04.2025), руб.|
|[ATOMSTACK A70 X70](https://www.ozon.ru/product/atomstack-a70-x70-max-850-800mm-70w-bolshoy-bolshoy-graver-derevo-metall-akril-rezki-1548655872/?from=share_android&perehod=smm_share_button_productpage_link)|850 на 800|246 000|
|[SCULPFUN S70](https://www.ozon.ru/product/sculpfun-s70-max-70w-800-830-razmer-bolshoy-gravirovalno-rezhushchiy-stanok-gravirovalnyy-rezak-1862855034/?from=share_android&perehod=smm_share_button_productpage_link)|800 на 830|151 000|
|[ATOMSTACK S40 Pro](https://www.ozon.ru/product/atomstack-s40-pro-razmer-850-800-mm-40-vt-professionalnyy-lazernyy-gravirovalnyy-stanok-dlya-1252041113/?oos_search=false)|850 на 800|246 000|
|[FEUNGSAKE](https://www.ozon.ru/product/feungsake-lazernyy-gravirovalnyy-stanok-rabochey-zonoy-1000x1000mm-avtomat-dlya-rezki-lazera-90vt-1520813453/?from_sku=1520748134&oos_search=false&tab=questions)|1000 на 1000|25 000 - 45 000<br><br>_(в зависимости от модификации_)|

В наших планах было уложиться в 50-60к. Раз уж заговорили об этом, вот список задействованных компонентов (кроме метизов) с ценами и ссылками на магазины:

[Смета.xlsx](https://docs.google.com/spreadsheets/d/1c1ck59-3Z8nxXYQLDkopfF2porg_SFz9/edit?rtpof=true&gid=2037985577#gid=2037985577)

С учетом метизов и расходников типа пластика и проводов выходит около 40-45к. Некоторые из ссылок сметы будут продублированы далее для удобства чтения.
## Механика

В механической части достаточно много стандартных и печатных деталей, последние моделили в компасе и печатали PLA-пластиком. Сборка включает 3 основных узла: раму, портал и каретку оси X, несущую лазер.

![[Pasted image 20260202222545.jpg]]
Полная сборка (рендер сделан в SolidWorks)

**Рама** - это прямоугольное основание станка. Она собрана из алюминиевых профилей [V-slot 2040](https://www.soberizavod.ru/catalog/seriya_20_v_paz/profil_konstruktsionnyy_v20kh40_bez_pokrytiya/), соединенных [внутренними угловыми соединителями](https://www.soberizavod.ru/catalog/vnutrennie_uglovye_soediniteli/vnutrenniy_uglovoy_soedinitel_paz_6_a104/) и [Г-образными пластинами](https://www.soberizavod.ru/catalog/g_obraznye_seriya_20/g_soedinitel_60kh60v_paz_6_h30/). К профилям прикручиваются два уголка, на которые укладываются стальные бруски наподобие ламелей в промышленных станках.

По раме вдоль оси Y перемещается **портал**. Он состоит из двух роликовых кареток, соединяющего их профиля [2020](https://www.soberizavod.ru/catalog/seriya_20_v_paz/profil_konstruktsionnyy_v20kh20_bez_pokrytiya/) и пары других деталей. В полностью собранном виде выглядит так:

![[Pasted image 20260202222600.jpg]]
Портал

Левая и правая каретки немного отличаются, но основные элементы одни и те же: три [ролика](https://www.soberizavod.ru/catalog/nabor_rolikov/komplekt_plastikovyy_rolik_podshipnik/) и две большие печатные детали (слайдеры). В каждом слайдере есть место под винт с закладной гайкой для прижима нижнего ролика к профилю, чтобы каретки не люфтили:

![[Pasted image 20260202222609.png]]
Левая и правая каретки (порядок и ориентация те же, что и на рендере портала)

Перемещение портала по оси Y происходит за счет протягивания вдоль двух разомкнутых ремней, проложенных в боковых профилях: движок [Nema 17HS6401S](https://zona-3d.ru/catalog/elektronika/shagovye_dvigateli/shagovye_dvigateli_nema_17/shagovye_dvigateli_nema_17_bez_reduktora/shagovyy_dvigatel_nema_17_17hs6401) вращает передаточный вал; на вале синхронно вращаются шкивы в контакте с ремнями; каретки смещаются на равные расстояния, определяемые углом поворота вала.

![[Pasted image 20260202222621.png]]

Из-за околометровой длины возникают небольшие биения вала на высоких скоростях при холостых перемещениях, но этот недостаток несущественен и компенсируется возможностью обойтись только одним шаговиком для оси Y на левой каретке. Освободившееся место на правой отведено под менее мощный движок [nema 17HS8401](https://zona-3d.ru/catalog/elektronika/shagovye_dvigateli/shagovye_dvigateli_nema_17/shagovye_dvigateli_nema_17_bez_reduktora/shagovyj-dvigatel-nema-17-17hs8401?ysclid=m8viwqfy2b922335961) для перемещений вдоль Х - он вращает кольцевой ремень, концы которого замкнуты на **каретке с лазером**:

![Портал с кареткой оси Х](https://habrastorage.org/r/w1560/getpro/habr/upload_files/b78/f16/76e/b78f1676e729e0bcaca3fe89abf6a23f.JPG "Портал с кареткой оси Х")

Портал с кареткой оси Х

Сама каретка собирается из [роликовой пластины](https://www.ozon.ru/product/rolikovyy-blok-openbuilds-2020-v-slot-625zz-s-prizhimami-dlya-remnya-1742049654/?asb2=UvqdRS1VlUgik6Y8qCF32XgvPw6_aU6m3ccDHv5wNDaK8ndXbDP6n5jxF3FkJzDnkhNsYrOj8bz9-TX3nMpuWg&from_sku=1737465651&oos_search=false), печатного переходника, [подъемного модуля](https://www.ozon.ru/product/lazernyy-reguliruemyy-podemnyy-modul-tselnometallicheskiy-kronshteyn-po-osi-z-dlya-tts-55-pro-tts-1671530882/?asb=VeyzeHZyg1X4ij%252F%252BREeh%252BMqecep%252BAMYL6BzP9XNruTw%253D&asb2=qC00R63VDLXA3Y2GJGlgv4Utx6oY8fyyXzxOKWhnglw) (для фокусировки лазера перед запуском) и лазерной головки. Такая слоистость дает вполне осязаемый люфт при вертикальных нагрузках - при надавливании сверху на головку можно невооруженным глазом наблюдать упругий прогиб на небольшой угол. Но для лазера это не критично от слова совсем - ускорения в процессе работы не настолько большие, чтобы головку начало трясти.

![Каретка оси Х](https://habrastorage.org/r/w1560/getpro/habr/upload_files/036/358/75b/03635875b575084afbecc2ba30536e7c.png "Каретка оси Х")

Каретка оси Х

Кроме основных узлов можно упомянуть некоторые мелочи, связанные с натяжкой ремней и концевыми выключателями. Здесь и далее подобные отступления будут скрыты, чтобы сильно не перегружать текст.

- **Натяжка разомкнутых ремней (Y)**: ремень протягивается через красный натяжитель, который туго вставляется в паз профиля. Винт в выступе на ножке вкручивается в закладную гайку и притягивает натяжитель вместе с ремнем
    
- **Фиксация разомкнутых ремней (Y)**: ремень протягивается через одну деталь и зажимается сверху другой
    
- **Натяжка кольцевого ремня (Х):** используется готовый натяжитель    

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/718/b4e/c77/718b4ec77719c775066fc82139f89cb6.png)

- **Концевые выключатели и элементы для выравнивания фанеры:** один концевик расположен на левой каретке, а второй - в левом нижнем углу рамы. Добавив к этому две небольшие детальки можно обеспечить выравнивание заготовок по нулевой точке, что очень удобно.    

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/fec/312/e49/fec312e49a5e61fe4e72a109d009536b.png)

Теперь уже можно плавно перетекать в следующий раздел, но напоследок еще пара фото:

![Кабель-менеджмент, однако (провода длинные, прямо как лекция по матану пятой парой)](https://habrastorage.org/r/w1560/getpro/habr/upload_files/5af/de2/86a/5afde286ad36f8f098f862ed6fff4379.png "Кабель-менеджмент, однако (провода длинные, прямо как лекция по матану пятой парой)")

Кабель-менеджмент, однако (провода длинные, прямо как лекция по матану пятой парой)

## Электроника

Мозгом станка стала плата MKS DLC 32 V2.1 от Makerbase, для которой уже есть готовая прошивка от производителя с веб-интерфейсом, мобильное приложение и сенсорный дисплей. Подробнее про нее можно почитать на [гитхабе](https://github.com/makerbase-mks/MKS-DLC32?ysclid=m9385odf3o830320649) и в [руководстве по разводке](https://docs.yandex.ru/docs/view?tm=1743797081&tld=ru&lang=en&name=95-DLC32-wiring-manual.pdf&text=mks%20dlc%2032%20v2%20wiring%20manual&url=https%3A%2F%2Fwww.solomotorcontrollers.com%2Fwp-content%2Fuploads%2Fwpforo%2Fattachments%2F56%2F95-DLC32-wiring-manual.pdf&lr=213&mime=pdf&l10n=ru&sign=165247e4127112425a67be572428c2a9&keyno=0&nosw=1&serpParams=tm%3D1743797081%26tld%3Dru%26lang%3Den%26name%3D95-DLC32-wiring-manual.pdf%26text%3Dmks%2Bdlc%2B32%2Bv2%2Bwiring%2Bmanual%26url%3Dhttps%253A%2F%2Fwww.solomotorcontrollers.com%2Fwp-content%2Fuploads%2Fwpforo%2Fattachments%2F56%2F95-DLC32-wiring-manual.pdf%26lr%3D213%26mime%3Dpdf%26l10n%3Dru%26sign%3D165247e4127112425a67be572428c2a9%26keyno%3D0%26nosw%3D1) (на последнее буду активно ссылаться в этом разделе), здесь ограничимся схемой расположения разъемов:

![MKS DLC 32](https://habrastorage.org/r/w1560/getpro/habr/upload_files/ede/9d2/8b7/ede9d28b700e616cfce9271de3eb2622.png "MKS DLC 32")

MKS DLC 32

Принципиальная электросхема станка показана ниже.

![Ссылка в Miro](https://habrastorage.org/r/w1560/getpro/habr/upload_files/1d5/38c/0ca/1d538c0ca638ade516c1c00e7773763d.png "Ссылка в Miro")

Ссылка в [Miro](https://miro.com/app/board/uXjVIDBNUlk=/)

Кроме подключения всех модулей нужно было сделать следующее:

- На блоке питания (БП) отрегулировать потенциометром выходное напряжение до 12 В
    
- Включить режим микрошага (за это отвечают красные переключатели с белыми рычажками в слотах двигателей на плате). Мы работаем на микрошаге 1/16. Точность хорошая, а просадки крутящего момента и другие возможные проблемы не заметны
    
- На драйверах шаговых двигателей отрегулировать опорное напряжение (Vref). О том, как его настроить, можно почитать [здесь](https://3dtoday.ru/blogs/victor/kak-nastroit-draivery-sagovyx-dvigatelei-rasscityvaem-vref)
    
- Удалить из кабелей концевиков провод 5V. Механические концевики не будут работать корректно, если его оставить (согласно руководству по разводке, этот провод нужен только для фотоэлектрических выключателей)
    

А теперь несколько оговорок.

**Кабели питания**

Длинные многожильные кабели (питание шаговиков, лазера и одного из концевых выключателей) пришлось делать самостоятельно, т.к. от некоторых проводов требовалась длина более 2 метров (в продаже обычно от 1 до 2 м). Пришлось научиться обжимать клеммы в разъемы (о том, как это делается, есть хорошее [видео](https://yandex.ru/video/touch/preview/3978919387718554188))

![Слева - сборка для проверки работы; cправа - кабель питания nema 17 крупным планом](https://habrastorage.org/r/w1560/getpro/habr/upload_files/c77/c9e/2e6/c77c9e2e63d306ddd9a93a160feb4c00.jpg "Слева - сборка для проверки работы; cправа - кабель питания nema 17 крупным планом")

Слева - сборка для проверки работы; cправа - кабель питания nema 17 крупным планом

**Подключение шаговиков**

Здесь трудно накосячить, но невнимательность всегда может привести к сложностям. К короткому замыканию, например.

Дело было так. Движок для оси Y покупали отдельно, а для Х отрыли в мастерской; начали делать кабели под них. В комплекте с покупным движком шел метровый кабель, поэтому просто сделали две его удлиненные копии с таким же расположением проводов в колодках (_оба движка nema 17, значит и подключаются одинаково, ага?_). Подсоединили их и подали питание на плату. Ничего хорошего не случилось: послышался неприятный шум и дисплей начал мигать белым.

Оказалось, что пины обмоток в разъемах на шаговиках расположены по-разному: прямое подключение на одном и перекрестное - на другом; поэтому самодельный кабель не обеспечивал нормальную связь шаговика оси Х с платой, а коротил обе его обмотки. Поменяли местами два провода в разъеме и все заработало как надо. Видимо, у платы неслабый уровень защиты, т.к. ничего не сгорело.

Вывод простой: пины обмоток на шаговиках и плате лучше предварительно прозванивать мультиметром, чтобы потом не было неожиданностей при подключении.

![Прямое и перекрестное подключение обмоток nema 1](https://habrastorage.org/r/w1560/getpro/habr/upload_files/3d7/bc0/afc/3d7bc0afc9d3a4dc0560f3627a399a10.png "Прямое и перекрестное подключение обмоток nema 1")

Прямое и перекрестное подключение обмоток nema 17

**Подключение лазера**

На лазерную головку идут два провода питания (V, GND) и еще один для управления мощностью луча через ШИМ (TTL). При подключении лазера под напряжением 12 В и с потребляемой электрической мощностью до 25 Вт можно использовать 3 пина на плате:

![Схема подключения, предложенная в руководстве по разводке](https://habrastorage.org/r/w1560/getpro/habr/upload_files/c90/449/c90/c90449c9078af2de16a508279e02cd65.png "Схема подключения, предложенная в руководстве по разводке")

Схема подключения, предложенная в руководстве по разводке

Но выбранная головка рассчитана на 12 В и 3.8 А (т.е. потребляемая мощность ~ 46 Вт). При попытке задействовать такой тип подключения мы бы просто испортили дорожки на плате током, превышающим допустимое значение почти в два раза. В связи с этим надо было тянуть с платы на лазер только ШИМ, а питание подключать напрямую от БП (см. электросхему).

Это работает отлично, но есть важный нюанс: если лазер питается напрямую от БП, то плата обязательно должна питаться с этого же БП. В противном случае есть очень высокая вероятность, что при запуске станка лазер включится без предупреждения на неопределенной мощности.

Объяснение

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/167/3ec/bb4/1673ecbb4b1f4b3d9c5587a96c675c77.png)

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/822/3d6/30d/8223d630d47292cc20e0a48a8c5a3845.png)

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/c50/2b8/f88/c502b8f88ce663c9777082c056876758.jpg)

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/788/622/613/7886226133a867e3f522d015c7f0bf79.png)

Кстати, по этой же причине не стоит вынимать штекер питания из платы, когда вся электросхема подключена в сеть.

**Статика**

Эта проблема дала о себе знать во время первых длительных тестов гравировки, когда вся схема подключалась в сеть через шнур без заземления. Cтанок работал в целом нормально, но:

- Проводящие части изредка бились током при касании (не сильно, но ощутимо)
    
- Электроника пару раз полностью умирала на несколько минут (вплоть до индикаторных светодиодов на плате, не говоря уже о дисплее и остальном)
    

Причиной этих неполадок оказался статический заряд, возникающий из-за трения в конструкции (ролики + профиль, шкивы + ремни и т.п.). Статики накапливалось достаточно для того, чтобы в какой-то момент произошла разрядка через плату, опасная для чувствительной электроники. После замены старого сетевого шнура на шнур с заземлением и подключения земли БП к раме проблема ушла - теперь вместо внезапных разрядок статика постоянно утекает с рамы на землю и электроника не страдает.

И опять-таки ничего не сгорело и не стало работать заметно хуже, но, возможно, эти разряды аукнутся на сроке службы и общей надежности платы / драйверов / лазера. Кстати, из-за своей структуры лазерные диоды очень чувствительны к статике, которая может привести к так называемому критическому оптическому повреждению (COD). Вдаваться в подробности нет смысла, на эту тему на Хабре уже написана отличная [статья](https://habr.com/ru/articles/589009/).

## Программное обеспечение

С программными вопросами все оказалось достаточно просто, даже код писать не пришлось. Надо было подобрать приложение для управления станком, прошить плату и настроить параметры конфигурации прошивки.

**Приложение**

Любое приложение для устройств с ЧПУ в первую очередь должно уметь генерировать по входному файлу G-код, а привлекательность подобного софта определяется уже набором дополнительных функций. Для лазерных ЧПУ на слуху две хороших программы - LaserGRBL и LightBurn. Мы использовали обе, но LaserGRBL - только на начальных этапах.

LaserGRBL может закрыть базовые потребности, но функционал у него слабоват по сравнению с LB (что неудивительно, т.к. LaserGRBL - бесплатный софт для любительских станков, а LB - профессиональное ПО с лицензией). Если нет планов на что-то относительно масштабное, то можно ограничиться первым вариантом, но лучше помучиться и найти _приемлемый_ способ поставить себе LB - так будет намного лучше. Вот основные причины:

- Очень удобный интерфейс с продвинутыми настройками
    
- Широкий спектр поддерживаемых форматов (для резки нужна векторная графика по типу dxf или svg, а для гравировки могут понадобиться еще jpeg, png и т.д.)
    
- Встроенный редактор, где можно прямо внутри проекта регулировать взаимное расположение изображений (выравнивания, повороты), дорисовывать векторную графику, добавлять текст
    

![Интерфейс основного окна LightBurn. При подготовке файла нужно разместить все элементы на рабочем поле и настроить параметры скорости / мощности для разных слоев. В данном случае есть всего два слоя -  один для гравировки растрового изображения и второй - для выреза](https://habrastorage.org/r/w1560/getpro/habr/upload_files/854/ec8/5e5/854ec85e5f901cb0242bdaa15e4c7593.png "Интерфейс основного окна LightBurn. При подготовке файла нужно разместить все элементы на рабочем поле и настроить параметры скорости / мощности для разных слоев. В данном случае есть всего два слоя -  один для гравировки растрового изображения и второй - для выреза")

Интерфейс основного окна LightBurn. При подготовке файла нужно разместить все элементы на рабочем поле и настроить параметры скорости / мощности для разных слоев. В данном случае есть всего два слоя - один для гравировки растрового изображения и второй - для выреза

Больше говорить про LB нет особого смысла, при необходимости можно зайти на официальный сайт и посмотреть обучающие видео, там все подробно рассказывается. Рекламная пауза окончена.

**Прошивка**

Рассматривалось 3 варианта: GRBL, marlin и прошивка от производителя платы Makerbase. Из-за преимущества в виде встроенного веб-интерфейса и мобильного приложения решили выбрать последнюю.

Процесс установки подробно описан в [руководстве пользователя](https://docs.yandex.ru/docs/view?tm=1744577041&tld=ru&lang=en&name=A16Ynt2XwWL.pdf&text=mks%20dlc%2032%20user%20manual&url=https%3A%2F%2Fm.media-amazon.com%2Fimages%2FI%2FA16Ynt2XwWL.pdf&lr=213&mime=pdf&l10n=ru&sign=336ff8cfdf0e14dc132e6e0f1c33476b&keyno=0&nosw=1&serpParams=tm%3D1744577041%26tld%3Dru%26lang%3Den%26name%3DA16Ynt2XwWL.pdf%26text%3Dmks%2Bdlc%2B32%2Buser%2Bmanual%26url%3Dhttps%253A%2F%2Fm.media-amazon.com%2Fimages%2FI%2FA16Ynt2XwWL.pdf%26lr%3D213%26mime%3Dpdf%26l10n%3Dru%26sign%3D336ff8cfdf0e14dc132e6e0f1c33476b%26keyno%3D0%26nosw%3D1), которое почему-то отсутствовало на гитхабе и было найдено на просторах интернета. Прошитая плата уже на 90% готова к полноценной работе: все функции подключены, но на дефолтных параметрах. На данном этапе можно тестировать электросхему через дисплей или веб-интерфейс.

![Меню для управления с дисплея](https://habrastorage.org/r/w1560/getpro/habr/upload_files/62b/08d/776/62b08d77689c3f09255e150203aaf744.jpg "Меню для управления с дисплея")

Меню для управления с дисплея

![Веб-интерфейс. В терминале справа видны команды G-кода, отвечающие за перемещения ($J=G91 G21 F1500 X50 -  50 мм вдоль оси Х со скоростью 1500 мм/мин)](https://habrastorage.org/r/w1560/getpro/habr/upload_files/ba5/99a/3e6/ba599a3e60864d9ac8b35726a0cc08f5.png "Веб-интерфейс. В терминале справа видны команды G-кода, отвечающие за перемещения ($J=G91 G21 F1500 X50 -  50 мм вдоль оси Х со скоростью 1500 мм/мин)")

Веб-интерфейс. В терминале справа видны команды G-кода, отвечающие за перемещения ($J=G91 G21 F1500 X50 - 50 мм вдоль оси Х со скоростью 1500 мм/мин)

Первые тесты шаговиков и лазера (пункты 2 и 3 предыдущего раздела) как раз выполнялись на "дефолтной" прошивке, т.к. настройка параметров не имеет смысла до тех пор, пока механика и электросхема не собраны практически полностью*.

*

![Minimum Viable Product aka MVP](https://habrastorage.org/r/w1560/getpro/habr/upload_files/879/f77/255/879f772556d5fbadaa1340d0fd979e91.png "Minimum Viable Product aka MVP")

**Настройки конфигурации**

Ну так вот, когда MVP уже готов, можно приступать к замене дефолтных параметров в конфигурационном файле. Т.к. файлик небольшой (в нем всего 110 строк и около 30 настраиваемых параметров), то его было решено тоже прикрепить здесь. Настройки там уже наши:

dlc_cfg

```

```

В большинстве своем понятно, что за что отвечает. Вот, например, задание рабочей области:

```
//(X-axis maximum travel)   	
$130=800.000 
//(Y-axis maximum travel) 	
$131=825.000
//(Z-axis maximum travel)  	
$132=0.000 
```

Но есть и не самые интуитивно понятные параметры, такие как _step direction invert_, _soft limits, arc tolerance_ и т.п. Возникает нюанс, касающийся того, где искать пояснения на этот счет. Конечно, на гитхабе MKS DLC 32 есть раздел parameters configuration, где все расписано чуть более подробно. Однако, если внимательно присмотреться к структуре файла, то можно заметить, что параметры с точностью до номеров идентичны параметрам другой прошивки с открытым исходным кодом - GRBL. Логично предположить, что MKS основана на GRBL, и искать информацию в первоисточнике, и эта идея себя полностью оправдывает: на гитхабе GRBL все настройки описаны очень хорошо (раздел [grbl settings and what they mean](https://github.com/gnea/grbl/wiki/Grbl-v1.1-Configuration#grbl-settings)).

Можно выделить несколько особо полезных параметров:

_Travel resolution ($100-$102)_ устанавливает количество шагов на миллиметр для каждого движка. О том, как рассчитать этот параметр для ременной / винтовой передачи можно почитать [тут](https://cnc-tex.ru/news/35/raschet-i-nastroika-remennoi-i-vintovoi-pridachi-chpu.html?ysclid=m9gxvj9z86215542398).

_Step direction invert ($3)_ задает направление вращения шаговиков. Это битовая маска, принимающая значения от 0 до 7: если установлено значение 0, то все движки будут крутиться в направлениях по умолчанию, а инверсии движка i-ой оси соответствует маска с единицей на i-ой позиции:

![Таблица с гитхаба grbl об инверсии движков](https://habrastorage.org/r/w1560/getpro/habr/upload_files/bc9/f73/3e9/bc9f733e93a167b84bd3d4d548b3f5fc.png "Таблица с гитхаба grbl об инверсии движков")

Таблица с гитхаба grbl об инверсии движков

_Homing ($22-$27)_ - это набор параметров, отвечающих за поиск нулевой точки.

```
/(Homing cycle enable)
$22=1
//(Homing direction invert)			
$23=3
//(Homing locate feed rate) 		
$24=200.000
//(Homing search seek rate)  	
$25=1000.000
//(Homing switch debounce delay)	
$26=300.000
//(Homing switch pull-off distance)  	
$27=2.000
```

Если активировать цикл хоуминга ($22 = 1), то при нажатии соответствующей кнопки станок запустит процесс перемещения лазерной головки в начало координат. Направление движения можно откорректировать в $23 - все точно так же, как с инверсией шаговиков.

![Хоуминг](https://habrastorage.org/getpro/habr/upload_files/908/fc9/09c/908fc909c827ab388897d5045ceca303.gif "Хоуминг")

Хоуминг

Алгоритм хоуминга:

- дойти до концевиков на относительно высокой скорости _seek rate_
    
- отойти на небольшое расстояние _pull off distance_
    
- выждать небольшое время _delay_ (мкс) на случай дребезга в концевиках
    
- уточнить положение нуля на более низкой скорости _feed rate_ и снова отойти на _pull off distance_
    

_Soft limits ($20)_ - мягкие (программные) ограничения. С ними контроллер будет анализировать координаты и отклонять все запросы на перемещения, которые выводят инструмент за пределы рабочей зоны. Имеет смысл только в связке с настроенным хоумингом.

**Обновление конфигурации**

Тут совсем кратенько. Есть 2 способа внести правки в конфигурацию (оба описаны в [видео](https://www.youtube.com/watch?v=MKRBYVbxJmw&t=139s)):

- Через уже упомянутый LaserGRBL или веб-интерфейс
    
- Через SD-карту
    

В LaserGRBL при подключении платы к ноутбуку можно открыть табличку с параметрами и подкорректировать их. Все перезаписывается мгновенно.

![Изменение конфигурации в LaserGRBL](https://habrastorage.org/r/w1560/getpro/habr/upload_files/374/9f2/bcd/3749f2bcdfc23c9a8061798107cec702.png "Изменение конфигурации в LaserGRBL")

Изменение конфигурации в LaserGRBL

В веб-интерфейсе _вроде как*_ все делается по такому же принципу, его не пробовали.

*

Второй способ с SD медленный и отвратительный: надо записать обновленный файл на карту, вставить ее в плату и подождать минуту-полторы, пока прошивка обновится. Применять как будто нет смысла, когда есть альтернатива.

## Безопасность

С претензией на полезность для начинающих подобный раздел обходить стороной было бы неправильно. Если коротко, то надо беречь глаза и не резать без вытяжки всякую дрянь. Но все же:

**Защитные очки**

Когда у тебя в запасе остается только 2 глаза, то не очень хочется ими рисковать. ~~К счастью,~~ большинство лазерных головок имеет встроенную ''защиту'' в виде абсорбционного фильтра, поглощающего часть излучения:

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/a43/c4e/880/a43c4e88057e080d63d28015140f531b.png)

Некоторые производители пишут, что их фильтры обеспечивают полную безопасность глаз. Однако нужно понимать следующее:

1. Их качество остается под вопросом. Например, оптические характеристики фильтра нашей головки нигде не указаны
    
2. Они не изолируют луч полностью: всегда найдутся углы зрения, под которыми можно словить зайчик
    

![Углы зрения - это мягко сказано. При резке луч пробивает заготовку и отражается  из-под станка - фильтр тут не сильно полезен (на столе лежит фанерка, мы не вандалы)](https://habrastorage.org/r/w1560/getpro/habr/upload_files/69e/217/b56/69e217b560e421eb81dab92f406b8a18.jpg "Углы зрения - это мягко сказано. При резке луч пробивает заготовку и отражается  из-под станка - фильтр тут не сильно полезен (на столе лежит фанерка, мы не вандалы)")

Углы зрения - это мягко сказано. При резке луч пробивает заготовку и отражается из-под станка - фильтр тут не сильно полезен (на столе лежит фанерка, мы не вандалы)

Поэтому стоит купить защитные очки. Нормальные, а не с озона / али, т.к. есть ряд нюансов, отличающих очки для лазера от просто цветных стекляшек. Цитата:

> Все защитные очки проектируются для защиты от конкретных длин волн излучаемых лазерами, и для хороших очков всегда нормируется оптическая плотность на каждой длине волны. Оптическая плотность это коэффициент ослабления очков, в англоязычных стандартах он называется OD-X, где Х – цифра обозначающее количество порядков ослабления. Так, например, OD-6 означает, что очки ослабляют излучение на 6 порядков, т.е. в 1000000 раз на данной длине волны. Ослабление в 1000 раз будет обозначаться как OD-3 и т.д.

Это из хабровской [статьи](https://habr.com/ru/articles/431630/) о лазерной безопасности. С пониманием физического смысла параметра OD можно легко воспринимать график, приложенный в описании к купленным очкам: в [нашем случае](https://laserbeam.ru/ochki/ep-3) весь видимый спектр до 500 нм глушится беспощадно за счет OD4+ и мир вокруг становится оранжевым, а блики от лазера - белыми.

![График зависимости оптической плотности очков от длины волны](https://habrastorage.org/r/w1560/getpro/habr/upload_files/913/169/47d/91316947dfeb6b361b812bd2bfdbcc27.png "График зависимости оптической плотности очков от длины волны")

График зависимости оптической плотности очков от длины волны

Но даже в хороших очках смотреть на блики не стоит - они все равно будут достаточно яркими и, как минимум, вызовут усталость глаз. По этой же причине фильтр на головке логично оставить - значительную часть света он в любом случае блокирует.

**Вытяжка**

Тут все просто. При желании порезать какой-то новый материал стоит как минимум поинтересоваться, насколько токсичные пары он будет выделять (и в каком объеме).

Например, если условный студент захочет вырезать условный кусочек акрила размером с монетку, используя окно вместо вытяжки (и надев респиратор, он же не совсем идиот), то эта затея займет где-то минуту. Правда, проветривать условное помещение потом придется 30 минут. Так что надо делать вытяжку.

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/5af/2d6/dc3/5af2d6dc3cf828ce302f5ef3ad03eaa2.jpg)

Кстати, мы планируем использовать для этого дела списанные советские кулеры охлаждения из ВЦ университетского ядерного реактора (теперь угадайте вуз). Питаются они от 220 В и тянут очень неплохо. Пока что вытяжка представляет из себя вентилятор с примотанной к нему на изоленту гофротрубой, что выглядит не очень эстетично и пользовательски, поэтому ниже будет просто фото с первых тестов:

![Расстояние от вентилятора до точки реза около полуметра](https://habrastorage.org/r/w1560/getpro/habr/upload_files/ba5/66e/848/ba566e84897fc38d1d2612b8cb6c52af.jpg "Расстояние от вентилятора до точки реза около полуметра")

Расстояние от вентилятора до точки реза около полуметра

## Демонстрация результатов

Теперь уже можно обсудить, что же получилось. Вот фото с рабочим процессом для затравки:

![Резка основания робота для хакатона по ROS2](https://habrastorage.org/r/w1560/getpro/habr/upload_files/fb9/275/120/fb9275120344543ffae39d920c0b59a0.png "Резка основания робота для хакатона по ROS2")

Резка основания робота для хакатона по ROS2

**Гравировка фанеры**

Гравировку растровых изображений можно делать на относительно высоких скоростях - от 5000 до 6000 мм/мин. За 6000 мм/мин уже не позволяет зайти ограничение мощности - контрастность будет плохой:

![Контрастность изображений в зависимости от скорости и мощности](https://habrastorage.org/r/w1560/getpro/habr/upload_files/431/d09/42b/431d0942b3fbd49acaa35d3156e7d90c.png "Контрастность изображений в зависимости от скорости и мощности")

Контрастность изображений в зависимости от скорости и мощности

Для векторных изображений на дугах и углах конструкция испытывает большие ускорения, но даже на 6000 мм/мин точность мало отличается от 750 мм/мин:

![Сторона больших квадратов - 20 мм](https://habrastorage.org/r/w1560/getpro/habr/upload_files/46d/c66/248/46dc6624861cbae593ea450cddc5d4f9.png "Сторона больших квадратов - 20 мм")

Сторона больших квадратов - 20 мм

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/4b0/43f/893/4b043f893ad3a5f76d5d56fedae5a2c5.png)

Тут всплывает интересный нюанс: векторы лучше наносить, читая g-код из заранее сохраненного файла. Если попытаться гравировать сразу из LightBurn без сохранения, то даже на 750 мм/мин получается жестокое непотребство, как слева.

Видимо, LB генерирует и обрабатывает g-код на ходу, из-за чего точность ограничена объемом буфера команд: при переполнении происходит упрощение траектории.

В общем, для наших запросов точность достаточная, а вот скорость оставляет желать лучшего, но на десятиваттнике больше не сделаешь. Набравшись терпения, можно натворить всякой красоты на фанерке:

![190 на 140 мм: вместе с резкой занимает около часа (A. Shipwright)](https://habrastorage.org/r/w1560/getpro/habr/upload_files/ef0/89e/709/ef089e709f5d0e2406d0b1bc9adc7b47.png "190 на 140 мм: вместе с резкой занимает около часа (A. Shipwright)")

190 на 140 мм: вместе с резкой занимает около часа _(A. Shipwright)_

![150 на 150 мм: меньше предыдущего, но требует примерно столько же времени из-за большей эффективной площади выжигания (Эшер, "Относительность")](https://habrastorage.org/r/w1560/getpro/habr/upload_files/0f6/174/cdf/0f6174cdf98b22c360e8ca4769543906.png "150 на 150 мм: меньше предыдущего, но требует примерно столько же времени из-за большей эффективной площади выжигания (Эшер, \"Относительность\")")

150 на 150 мм: меньше предыдущего, но требует примерно столько же времени из-за большей эффективной площади выжигания _(Эшер, "Относительность")_

И еще несколько фото

![Одна из первых гравировок (25.02.2025)](https://habrastorage.org/r/w1560/getpro/habr/upload_files/936/10f/a4c/93610fa4cc77e415ad9d393db808b0cb.png "Одна из первых гравировок (25.02.2025)")

![Какая-то кибертян](https://habrastorage.org/r/w1560/getpro/habr/upload_files/c58/e39/4a4/c58e394a48a41ac19c3c3950d27bc19d.png "Какая-то кибертян")

![Оберег от посторонних на дверь лабы](https://habrastorage.org/r/w1560/getpro/habr/upload_files/b7a/7c1/f9b/b7a7c1f9b9986ff730e8de232758a47a.png "Оберег от посторонних на дверь лабы")

**Резка фанеры**

С резкой дела обстоят так: 3-4 мм терпимо, а остальное - боль и страдание. Трешку можно резать на скорости 250 мм/мин за один проход (на максимальной мощности), а вот для резки 6 мм нужно что-то около двух проходов на 120 мм/мин. Нетрудно прикинуть, что любая деталь из фанеры толще 4 мм, чьи размеры сопоставимы с рабочей областью, режется либо долго, либо очень долго (от 30 мин до 1.5 ч по порядку величины).

Резка уже успела пригодиться инженерному кружку на нескольких соревнованиях:

![Слева: робот для Eurobot 2025; справа: робот для ROS2-хакатона](https://habrastorage.org/r/w1560/getpro/habr/upload_files/9f1/2a2/f02/9f12a2f02e1794ef14ee78f3830862de.png "Слева: робот для Eurobot 2025; справа: робот для ROS2-хакатона")

Слева: робот для Eurobot 2025; справа: робот для ROS2-хакатона

Кстати, на хакатоне ребята [взяли первое место](https://habr.com/ru/companies/sberbank/articles/903126/) (благодаря ~~продуманным алгоритмам автономной навигации и качественно оформленному открытому репозиторию~~ фанерному корпусу, разумеется), а на всероссийском этапе евробота - второе.

**Другие материалы**

![Алюминиевые карточки с покрытием: гравируются со скоростью 6000 мм/мин даже на 70-80 % от максимальной мощности](https://habrastorage.org/r/w1560/getpro/habr/upload_files/c8b/0bf/43a/c8b0bf43aeecdc94bb9af65dcadb3eef.png "Алюминиевые карточки с покрытием: гравируются со скоростью 6000 мм/мин даже на 70-80 % от максимальной мощности")

Алюминиевые карточки с покрытием: гравируются со скоростью 6000 мм/мин даже на 70-80 % от максимальной мощности

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/e01/ed7/295/e01ed7295690241d3c154b60556fec3a.png)

![Зеркальная нержавейка 65 на 15 мм: 10 Вт, 700 мм/мин (А. Shipwright)](https://habrastorage.org/r/w1560/getpro/habr/upload_files/ddf/c2c/8c3/ddfc2c8c36e2672cebc4599cecd81ce4.png "Зеркальная нержавейка 65 на 15 мм: 10 Вт, 700 мм/мин (А. Shipwright)")

Зеркальная нержавейка 65 на 15 мм: 10 Вт, 700 мм/мин _(А. Shipwright)_

Были даже попытки поковырять лазером стекло и текстолит с медным напылением - обе безрезультатные: для меди мощности не хватает, а стекло пропускает видимый свет, поэтому вся энергия уходит в подложку. Ну и черный акрил еще пробовали, да.